<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="author" content="Vance Lucas"><meta name="keywords"><meta name="description"><title>Relations &ndash; Spot ORM</title><link href="/favicon.png" rel="icon"><link rel="alternate" href="/atom.xml" title="config.title" type="application/atom.xml"><link rel="stylesheet" href="/stylesheets/main.css"><link rel="stylesheet" href="/stylesheets/font-awesome.min.css"></head><body><nav id="topnav" role="navigation" class="navbar navbar-default"><div class="container"><a href="/" class="navbar-brand"><i class="fa fa-database"></i> Spot ORM</a><ul class="nav navbar-nav navbar-right pad-right"><li><a href="/">Home</a></li><li><a href="/docs">Documentation</a></li><li><a href="/articles">Articles</a></li></ul></div></nav><div class="container"><div class="row"><div class="col-md-2 col-lg-2"><div class="sidenav"><ul class="nav"><li><div class="nav-title">Setup</div><ul class="nav submenu"><li><a href="/docs/installation" title="Installation" class="link">Installation</a></li><li><a href="/docs/database-setup" title="Database Setup" class="link">Database Setup</a></li></ul></li><li><div class="nav-title">Basics</div><ul class="nav submenu"><li><a href="/docs/mappers" title="Mappers" class="link">Mappers</a></li><li><a href="/docs/entities" title="Entities" class="link">Entities</a></li><li><a href="/docs/types" title="Field Types" class="link">Field Types</a></li><li><a href="/docs/migrations" title="Migrations" class="link">Migrations</a></li><li><a href="/docs/crud" title="Basic CRUD" class="link">Basic CRUD</a></li><li><a href="/docs/queries" title="Queries" class="link">Queries</a></li><li><a href="/docs/relations" title="Relations" class="link active">Relations</a></li><li><a href="/docs/events" title="Events" class="link">Events</a></li></ul></li><li><div class="nav-title">Advanced</div><ul class="nav submenu"><li><a href="/docs/scopes" title="Scopes" class="link">Scopes</a></li><li><a href="/docs/complex-queries" title="Complex Queries" class="link">Complex Queries</a></li></ul></li></ul></div></div><div class="col-md-10 col-lg-10"><section id="page_content"><article><div class="toc-wrap"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Live_Query_Objects"><span class="toc-number">1.</span> <span class="toc-text">Live Query Objects</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Eager_Loading"><span class="toc-number">2.</span> <span class="toc-text">Eager Loading</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Relation_Types"><span class="toc-number">3.</span> <span class="toc-text">Relation Types</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HasOne"><span class="toc-number">4.</span> <span class="toc-text">HasOne</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Method"><span class="toc-number">4.1.</span> <span class="toc-text">Method</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Example"><span class="toc-number">4.2.</span> <span class="toc-text">Example</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BelongsTo"><span class="toc-number">5.</span> <span class="toc-text">BelongsTo</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Method-1"><span class="toc-number">5.1.</span> <span class="toc-text">Method</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Example-1"><span class="toc-number">5.2.</span> <span class="toc-text">Example</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HasMany"><span class="toc-number">6.</span> <span class="toc-text">HasMany</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Method-2"><span class="toc-number">6.1.</span> <span class="toc-text">Method</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Example-2"><span class="toc-number">6.2.</span> <span class="toc-text">Example</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HasManyThrough"><span class="toc-number">7.</span> <span class="toc-text">HasManyThrough</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Method-3"><span class="toc-number">7.1.</span> <span class="toc-text">Method</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Example-3"><span class="toc-number">7.2.</span> <span class="toc-text">Example</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Explanation"><span class="toc-number">7.3.</span> <span class="toc-text">Explanation</span></a></li></ol></li></ol></div><h1>Relations<div class="docs-edit"><a href="https://github.com/vlucas/spot-site/blob/master/source/docs/relations/index.md" title="Improve this Documentation"><i class="fa fa-pencil"></i> edit</a></div></h1><p>Relations are convenient ways to access related, parent, and child entities from
another loaded entity object. An example might be <code>$post-&gt;comments</code> to query for
all the comments related to the current <code>$post</code> object.</p>
<h3 id="Live_Query_Objects">Live Query Objects</h3>
<p>All relations are returned as instances of relation classes that extend
<code>Spot\Relation\RelationAbstract</code>. This class holds a <code>Spot\Query</code> object
internally, and allows you to chain your own query modifications on it so you
can do custom things with relations, like ordering, adding more query
conditions, etc.</p>
<figure class="highlight php"><pre><div class="line"><span class="variable">$mapper</span><span class="variable">-&gt;hasMany</span>(<span class="variable">$entity</span>, <span class="string">'Entity\Comment'</span>, <span class="string">'post_id'</span>)</div><div class="line">    <span class="variable">-&gt;where</span>([<span class="string">'status'</span> =&gt; <span class="string">'active'</span>])</div><div class="line">    <span class="variable">-&gt;order</span>([<span class="string">'date_created'</span> =&gt; <span class="string">'ASC'</span>]);</div></pre></figure>

<p>All of these query modifications are held in a queue, and are run when the
relation is actually executed (on <code>count</code> or <code>foreach</code> iteration, or when
<code>execute</code> is explicitly called).</p>
<h3 id="Eager_Loading">Eager Loading</h3>
<p>All relation types are lazy-loaded by default, and can be eager-loaded to
solve the N+1 query problem using the <code>with</code> method:</p>
<figure class="highlight php"><pre><div class="line"><span class="variable">$posts</span> = <span class="variable">$posts</span><span class="variable">-&gt;all</span>()<span class="variable">-&gt;with</span>(<span class="string">'comments'</span>);</div></pre></figure>

<p>Multiple relations can be eager-loaded using an array:</p>
<figure class="highlight php"><pre><div class="line"><span class="variable">$posts</span> = <span class="variable">$posts</span><span class="variable">-&gt;all</span>()<span class="variable">-&gt;with</span>([<span class="string">'comments'</span>, <span class="string">'tags'</span>]);</div></pre></figure>

<h3 id="Relation_Types">Relation Types</h3>
<p>Entity relation types are:</p>
<ul>
<li><code>HasOne</code></li>
<li><code>BelongsTo</code></li>
<li><code>HasMany</code></li>
<li><code>HasManyThrough</code></li>
</ul>
<h3 id="HasOne">HasOne</h3>
<p>HasOne is a relation where the <em>related object has a field which points to the
current object</em> - an example might be <code>User</code> has one <code>Profile</code>.</p>
<h4 id="Method">Method</h4>
<figure class="highlight php"><pre><div class="line"><span class="variable">$mapper</span><span class="variable">-&gt;hasOne</span>(Entity <span class="variable">$entity</span>, <span class="variable">$foreignEntity</span>, <span class="variable">$foreignKey</span>)</div></pre></figure>

<ul>
<li><code>$entity</code> - The current entity instance</li>
<li><code>$foreignEntity</code> - Name of the entity you want to load</li>
<li><code>$foreignKey</code> - Field name on the <code>$foreignEntity</code> that matches up with the
primary key of the current entity</li>
</ul>
<h4 id="Example">Example</h4>
<figure class="highlight php"><pre><div class="line"><span class="keyword">namespace</span> <span class="title">Entity</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> \<span class="title">Spot</span>\<span class="title">Entity</span></span></div><div class="line">{</div><div class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="variable">$table</span> = <span class="string">'users'</span>;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">fields</span><span class="params">()</span></span></div><div class="line">    {</div><div class="line">        <span class="keyword">return</span> [</div><div class="line">            <span class="string">'id'</span>           =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'integer'</span>, <span class="string">'autoincrement'</span> =&gt; <span class="keyword">true</span>, <span class="string">'primary'</span> =&gt; <span class="keyword">true</span>],</div><div class="line">            <span class="string">'username'</span>     =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'string'</span>, <span class="string">'required'</span> =&gt; <span class="keyword">true</span>],</div><div class="line">            <span class="string">'email'</span>        =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'string'</span>, <span class="string">'required'</span> =&gt; <span class="keyword">true</span>],</div><div class="line">            <span class="string">'status'</span>       =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'integer'</span>, <span class="string">'default'</span> =&gt; <span class="number">0</span>, <span class="string">'index'</span> =&gt; <span class="keyword">true</span>],</div><div class="line">            <span class="string">'date_created'</span> =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'datetime'</span>, <span class="string">'value'</span> =&gt; <span class="keyword">new</span> \DateTime()]</div><div class="line">        ];</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">relations</span><span class="params">(Mapper <span class="variable">$mapper</span>, Entity <span class="variable">$entity</span>)</span></span></div><div class="line">    {</div><div class="line">        <span class="keyword">return</span> [</div><div class="line">            <span class="string">'profile'</span> =&gt; <span class="variable">$mapper</span><span class="variable">-&gt;hasOne</span>(<span class="variable">$entity</span>, <span class="string">'Entity\User\Profile'</span>, <span class="string">'user_id'</span>)</div><div class="line">        ];</div><div class="line">    }</div><div class="line">}</div></pre></figure>

<p>In this scenario, the <code>Entity\User\Profile</code> entity has a field named <code>user_id</code>
which the <code>Entity\User</code>‘s <code>id</code> field as a value. Note that <em>no field exists on
this entity for this relation, but rather the related entity</em>.</p>
<h3 id="BelongsTo">BelongsTo</h3>
<p>BelongsTo is a relation where the <em>current object has a field which points to
the related object</em> - an example might be <code>Post</code> belongs to <code>User</code>.</p>
<h4 id="Method-1">Method</h4>
<figure class="highlight php"><pre><div class="line"><span class="variable">$mapper</span><span class="variable">-&gt;belongsTo</span>(Entity <span class="variable">$entity</span>, <span class="variable">$foreignEntity</span>, <span class="variable">$localKey</span>)</div></pre></figure>

<ul>
<li><code>$entity</code> - The current entity instance</li>
<li><code>$foreignEntity</code> - Name of the entity you want to load</li>
<li><code>$localKey</code> - Field name on the current entity that matches up with the
primary key of <code>$foreignEntity</code> (the one you want to load)</li>
</ul>
<h4 id="Example-1">Example</h4>
<figure class="highlight php"><pre><div class="line"><span class="keyword">namespace</span> <span class="title">Entity</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Post</span> <span class="keyword">extends</span> \<span class="title">Spot</span>\<span class="title">Entity</span></span></div><div class="line">{</div><div class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="variable">$table</span> = <span class="string">'posts'</span>;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">fields</span><span class="params">()</span></span></div><div class="line">    {</div><div class="line">        <span class="keyword">return</span> [</div><div class="line">            <span class="string">'id'</span>           =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'integer'</span>, <span class="string">'autoincrement'</span> =&gt; <span class="keyword">true</span>, <span class="string">'primary'</span> =&gt; <span class="keyword">true</span>],</div><div class="line">            <span class="string">'user_id'</span>      =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'integer'</span>, <span class="string">'required'</span> =&gt; <span class="keyword">true</span>],</div><div class="line">            <span class="string">'title'</span>        =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'string'</span>, <span class="string">'required'</span> =&gt; <span class="keyword">true</span>],</div><div class="line">            <span class="string">'body'</span>         =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'text'</span>, <span class="string">'required'</span> =&gt; <span class="keyword">true</span>],</div><div class="line">            <span class="string">'status'</span>       =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'integer'</span>, <span class="string">'default'</span> =&gt; <span class="number">0</span>, <span class="string">'index'</span> =&gt; <span class="keyword">true</span>],</div><div class="line">            <span class="string">'date_created'</span> =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'datetime'</span>, <span class="string">'value'</span> =&gt; <span class="keyword">new</span> \DateTime()]</div><div class="line">        ];</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">relations</span><span class="params">(Mapper <span class="variable">$mapper</span>, Entity <span class="variable">$entity</span>)</span></span></div><div class="line">    {</div><div class="line">        <span class="keyword">return</span> [</div><div class="line">            <span class="string">'user'</span> =&gt; <span class="variable">$mapper</span><span class="variable">-&gt;belongsTo</span>(<span class="variable">$entity</span>, <span class="string">'Entity\User'</span>, <span class="string">'user_id'</span>)</div><div class="line">        ];</div><div class="line">    }</div><div class="line">}</div></pre></figure>

<p>In this scenario, the <code>Entity\Post</code> entity has a field named <code>user_id</code> which is
the <code>Entity\User</code>‘s <code>id</code> field’s value. Note that <em>the field exists on this
entity for this relation, but not on the related entity</em>.</p>
<h3 id="HasMany">HasMany</h3>
<p>HasMany is used where a single record relates to multiple other records - an
example might be <code>Post</code> has many <code>Comments</code>.</p>
<h4 id="Method-2">Method</h4>
<figure class="highlight php"><pre><div class="line"><span class="variable">$mapper</span><span class="variable">-&gt;hasMany</span>(Entity <span class="variable">$entity</span>, <span class="variable">$entityName</span>, <span class="variable">$foreignKey</span>, <span class="variable">$localValue</span> = <span class="keyword">null</span>)</div></pre></figure>

<ul>
<li><code>$entity</code> - The current entity instance</li>
<li><code>$entityName</code> - Name of the entity you want to load a collection of</li>
<li><code>$foreignKey</code> - Field name on the <code>$entityName</code> that matches up with the
current entity’s primary key</li>
</ul>
<h4 id="Example-2">Example</h4>
<p>We start by adding a <code>comments</code> relation to our <code>Post</code> object:</p>
<figure class="highlight php"><pre><div class="line"><span class="keyword">namespace</span> <span class="title">Entity</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Post</span> <span class="keyword">extends</span> <span class="title">Spot</span>\<span class="title">Entity</span></span></div><div class="line">{</div><div class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="variable">$table</span> = <span class="string">'posts'</span>;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">fields</span><span class="params">()</span></span></div><div class="line">    {</div><div class="line">        <span class="keyword">return</span> [</div><div class="line">            <span class="string">'id'</span>           =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'integer'</span>, <span class="string">'autoincrement'</span> =&gt; <span class="keyword">true</span>, <span class="string">'primary'</span> =&gt; <span class="keyword">true</span>],</div><div class="line">            <span class="string">'title'</span>        =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'string'</span>, <span class="string">'required'</span> =&gt; <span class="keyword">true</span>],</div><div class="line">            <span class="string">'body'</span>         =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'text'</span>, <span class="string">'required'</span> =&gt; <span class="keyword">true</span>],</div><div class="line">            <span class="string">'status'</span>       =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'integer'</span>, <span class="string">'default'</span> =&gt; <span class="number">0</span>, <span class="string">'index'</span> =&gt; <span class="keyword">true</span>],</div><div class="line">            <span class="string">'date_created'</span> =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'datetime'</span>, <span class="string">'value'</span> =&gt; <span class="keyword">new</span> \DateTime()]</div><div class="line">        ];</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">relations</span><span class="params">(Mapper <span class="variable">$mapper</span>, Entity <span class="variable">$entity</span>)</span></span></div><div class="line">    {</div><div class="line">        <span class="keyword">return</span> [</div><div class="line">            <span class="string">'comments'</span> =&gt; <span class="variable">$mapper</span><span class="variable">-&gt;hasMany</span>(<span class="variable">$entity</span>, <span class="string">'Entity\Comment'</span>, <span class="string">'post_id'</span>)<span class="variable">-&gt;order</span>([<span class="string">'date_created'</span> =&gt; <span class="string">'ASC'</span>]),</div><div class="line">        ];</div><div class="line">    }</div><div class="line">}</div></pre></figure>

<p>And add a <code>Entity\Post\Comment</code> object with a ‘belongsTo’ relation back to the post:</p>
<figure class="highlight php"><pre><div class="line"><span class="keyword">namespace</span> <span class="title">Entity</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Comment</span> <span class="keyword">extends</span> \<span class="title">Spot</span>\<span class="title">Entity</span></span></div><div class="line">{</div><div class="line">    <span class="comment">// ... snip ...</span></div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">relations</span><span class="params">()</span></span></div><div class="line">    {</div><div class="line">        <span class="keyword">return</span> [</div><div class="line">            <span class="string">'post'</span> =&gt; <span class="variable">$mapper</span><span class="variable">-&gt;belongsTo</span>(<span class="variable">$entity</span>, <span class="string">'Entity\Post'</span>, <span class="string">'post_id'</span>)</div><div class="line">        ];</div><div class="line">    }</div><div class="line">}</div></pre></figure>

<h3 id="HasManyThrough">HasManyThrough</h3>
<p>HasManyThrough is used for many-to-many relationships. An good example is
tagging. A post has many tags, and a tag has many posts. This relation is
a bit more complex than the others, because a HasManyThrough requires a
join table and mapper.</p>
<h4 id="Method-3">Method</h4>
<figure class="highlight php"><pre><div class="line"><span class="variable">$mapper</span><span class="variable">-&gt;hasManyThrough</span>(Entity <span class="variable">$entity</span>, string <span class="variable">$hasManyEntity</span>, string <span class="variable">$throughEntity</span>, string <span class="variable">$selectField</span>, string <span class="variable">$whereField</span>)</div></pre></figure>

<ul>
<li><code>$entity</code> - The current entity instance</li>
<li><code>$hasManyEntity</code> - This is the target entity you want a collection of. In this case, we want a collection of <code>Entity\Tag</code> objects.</li>
<li><code>$throughEntity</code> - Name of the entity we are going through to get what we want - In this case, <code>Entity\PostTag</code>.</li>
<li><code>$selectField</code> - Name of the field on the <code>$throughEntity</code> that will select records by the primary key of <code>$hasManyEntity</code>.</li>
<li><code>$whereField</code> - Name of the field on the <code>$throughEntity</code> to select records by the current entities’ primary key (we have a post, so this will be the <code>Entity\PostTag-&gt;post_id</code> field).</li>
</ul>
<h4 id="Example-3">Example</h4>
<p>We need to add the <code>tags</code> relation to our <code>Post</code> entity, specifying query
conditions for both sides of the relation.</p>
<figure class="highlight php"><pre><div class="line"><span class="keyword">namespace</span> <span class="title">Entity</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Post</span> <span class="keyword">extends</span> <span class="title">Spot</span>\<span class="title">Entity</span></span></div><div class="line">{</div><div class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="variable">$table</span> = <span class="string">'posts'</span>;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">fields</span><span class="params">()</span></span></div><div class="line">    {</div><div class="line">        <span class="keyword">return</span> [</div><div class="line">            <span class="string">'id'</span>           =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'integer'</span>, <span class="string">'autoincrement'</span> =&gt; <span class="keyword">true</span>, <span class="string">'primary'</span> =&gt; <span class="keyword">true</span>],</div><div class="line">            <span class="string">'title'</span>        =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'string'</span>, <span class="string">'required'</span> =&gt; <span class="keyword">true</span>],</div><div class="line">            <span class="string">'body'</span>         =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'text'</span>, <span class="string">'required'</span> =&gt; <span class="keyword">true</span>],</div><div class="line">            <span class="string">'status'</span>       =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'integer'</span>, <span class="string">'default'</span> =&gt; <span class="number">0</span>, <span class="string">'index'</span> =&gt; <span class="keyword">true</span>],</div><div class="line">            <span class="string">'date_created'</span> =&gt; [<span class="string">'type'</span> =&gt; <span class="string">'datetime'</span>, <span class="string">'value'</span> =&gt; <span class="keyword">new</span> \DateTime()]</div><div class="line">        ];</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">relations</span><span class="params">(Mapper <span class="variable">$mapper</span>, Entity <span class="variable">$entity</span>)</span></span></div><div class="line">    {</div><div class="line">        <span class="keyword">return</span> [</div><div class="line">            <span class="string">'tags'</span> =&gt; <span class="variable">$mapper</span><span class="variable">-&gt;hasManyThrough</span>(<span class="variable">$entity</span>, <span class="string">'Entity\Tag'</span>, <span class="string">'Entity\PostTag'</span>, <span class="string">'tag_id'</span>, <span class="string">'post_id'</span>),</div><div class="line">        ];</div><div class="line">    }</div></pre></figure>

<h4 id="Explanation">Explanation</h4>
<p>The result we want is a collection of <code>Entity\Tag</code> objects where the id equals
the <code>post_tags.tag_id</code> column. We get this by going through the
<code>Entity\PostTags</code> entity, using the current loaded post id matching
<code>post_tags.post_id</code>.</p>
</article></section></div></div></div><div class="container"><footer id="page_foot"><div class="row"><div class="col-md-8 col-lg-8"><p class="text-muted">Using Spot in an awesome project? <a href="http://twitter.com/vlucas">Let me know</a>!</p><p class="text-muted"><a href="https://github.com/vlucas/spot2"><i class="fa fa-github"></i> View Code on GitHub</a> &mdash; Open source under the <a href="http://www.opensource.org/licenses/bsd-license.php">BSD license</a>.</p></p></div><div class="col-md-4 col-lg-4"><p class="text-muted text-right">Website built with&nbsp;<a href="http://hexo.io/">hexo</a></p></div><script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-359731-14', 'phpdatamapper.com');
ga('send', 'pageview');</script></div></footer></div></body></html>